<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Dramify Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui,-apple-system,sans-serif;
}

#container{
  position:relative;
  width:100%;
  height:100%;

  /* ðŸ”¥ FONDO PERMANENTE DEL REPRODUCTOR */
  background:
    radial-gradient(circle at center, rgba(255,255,255,0.06), rgba(0,0,0,0.95)),
    url("https://i.postimg.cc/RZC2fvwb/logo_dramify.png") center center no-repeat;

  background-size: min(60vw, 60vh);
}

/* VIDEO */
video{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
  transition:transform .35s ease;
}

/* rotaciÃ³n visual */
video.rotated{
  transform:rotate(90deg) scale(1.15);
}

/* OVERLAY inicial */
#overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.45);
  color:#fff;
  font-size:20px;
  z-index:10;
  cursor:pointer;
}
#overlay.hidden{
  opacity:0;
  pointer-events:none;
}

/* CONTROLES CUSTOM */
#controls{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:20;
  display:flex;
  gap:18px;
  opacity:0;
  transition:opacity .25s;
}

#controls.show{
  opacity:1;
}

/* botones */
.btn{
  width:60px;
  height:60px;
  border-radius:50%;
  border:none;
  background:rgba(20,20,20,.75);
  color:#fff;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  backdrop-filter:blur(8px);
  cursor:pointer;
}

/* orientaciÃ³n de botones */
@media (orientation:portrait){
  #controls{ flex-direction:column; }
}
@media (orientation:landscape){
  #controls{ flex-direction:row; }
}
</style>
</head>

<body>
<div id="container">

  <!-- CONTROLES -->
  <div id="controls">
    <button class="btn" id="closeBtn">âœ•</button>
    <button class="btn" id="rotateBtn">âŸ³</button>
  </div>

  <!-- OVERLAY -->
  <div id="overlay">â–¶ Tocar para reproducir</div>

  <!-- VIDEO -->
  <video
    id="video"
    controls
    playsinline
    webkit-playsinline
    preload="metadata">
  </video>

</div>

<script>
const video = document.getElementById('video');
const overlay = document.getElementById('overlay');
const controls = document.getElementById('controls');
const rotateBtn = document.getElementById('rotateBtn');
const closeBtn = document.getElementById('closeBtn');

let hideTimer;
let rotated = false;

/* cargar video */
const params = new URLSearchParams(location.search);
let url = params.get('video');
if(url){
  try{ url = decodeURIComponent(url); }catch(e){}
  video.src = url;
}else{
  overlay.textContent = 'âŒ No se recibiÃ³ video';
}

/* mostrar controles */
function showControls(){
  controls.classList.add('show');
  clearTimeout(hideTimer);
  hideTimer = setTimeout(()=>{
    controls.classList.remove('show');
  },2000);
}

/* overlay â†’ play */
overlay.onclick = ()=>{
  video.play()
    .then(()=>overlay.classList.add('hidden'))
    .catch(()=>overlay.textContent='âŒ Error');
};

video.addEventListener('play', ()=>{
  overlay.classList.add('hidden');
  showControls();
});

/* rotar visual */
rotateBtn.onclick = ()=>{
  rotated = !rotated;
  video.classList.toggle('rotated', rotated);
  showControls();
};

/* CERRAR â€” UNIVERSAL */
closeBtn.onclick = ()=>{
  // iframe / app
  window.parent?.postMessage(
    { type: 'DRAMIFY_CLOSE' },
    '*'
  );

  // fallback navegador
  setTimeout(()=>history.back(),100);
};

/* detectar interacciÃ³n */
['click','touchstart'].forEach(e=>{
  video.addEventListener(e, showControls);
});
</script>

</body>
</html>
